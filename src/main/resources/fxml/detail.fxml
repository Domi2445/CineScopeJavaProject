<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.ImageView?>

<VBox spacing="15" style="-fx-padding: 20;" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.filmeverwaltung.javaprojektfilmverwaltung.controller.DetailController">

    <HBox spacing="20">
        <!-- Poster und Buttons -->
        <VBox spacing="10" style="-fx-min-width: 200;">
            <ImageView fx:id="imgPoster" fitHeight="300" fitWidth="200" preserveRatio="true"/>

            <Button fx:id="btnSimilarMovies" text="Ähnliche Filme anzeigen" onAction="#handleShowSimilarMovies"
                    style="-fx-padding: 10; -fx-font-size: 12;"/>
            <Button text="Zur Watchlist hinzufügen" onAction="#handleAddToWatchList"
                    style="-fx-padding: 10; -fx-font-size: 12;"/>
            <Button text="Übersetzen" onAction="#handleTranslatePlot"
                    style="-fx-padding: 10; -fx-font-size: 12;"/>
            <Button text="Schließen" onAction="#handleClose"
                    style="-fx-padding: 10; -fx-font-size: 12;"/>
        </VBox>

        <!-- Film Details -->
        <VBox spacing="10" HBox.hgrow="ALWAYS">
            <Label fx:id="lblTitle" style="-fx-font-size: 24; -fx-font-weight: bold;"/>

            <Label fx:id="lblTeaser" style="-fx-font-size: 14; -fx-font-style: italic; -fx-text-fill: #666;" wrapText="true"/>

            <HBox spacing="20">
                <VBox spacing="5">
                    <Label text="Jahr:" style="-fx-font-weight: bold;"/>
                    <Label fx:id="lblYear"/>
                </VBox>
                <VBox spacing="5">
                    <Label text="Autor:" style="-fx-font-weight: bold;"/>
                    <Label fx:id="lblWriter"/>
                </VBox>
            </HBox>

            <VBox spacing="5">
                <Label text="Handlung:" style="-fx-font-weight: bold;"/>
                <TextArea fx:id="txtPlot" wrapText="true" prefRowCount="8" editable="false"/>
            </VBox>

            <VBox spacing="5">
                <Label text="Streaming-Anbieter:" style="-fx-font-weight: bold;"/>
                <HBox fx:id="streamingProvidersBox" spacing="10" style="-fx-padding: 5;"/>
            </VBox>
        </VBox>
    </HBox>

    <Separator/>

    <!-- Similar Movies Section -->
    <VBox fx:id="similarMoviesSection" spacing="10" visible="false">
        <Label text="Ähnliche Filme" style="-fx-font-size: 16; -fx-font-weight: bold;"/>
        <ProgressIndicator fx:id="progressSimilar" visible="false" prefWidth="50" prefHeight="50"/>

        <TableView fx:id="tableSimilarMovies" prefHeight="250">
            <columns>
                <TableColumn fx:id="colSimilarTitle" text="Titel" prefWidth="250"/>
                <TableColumn fx:id="colSimilarYear" text="Jahr" prefWidth="80"/>
                <TableColumn fx:id="colSimilarRating" text="Bewertung" prefWidth="100"/>
                <TableColumn fx:id="colSimilarPlot" text="Handlung" prefWidth="300"/>
            </columns>
        </TableView>
    </VBox>
</VBox>
